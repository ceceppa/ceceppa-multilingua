var _cml_searchTimeout=0;var _cml_use_qem=false;var _cml_qed_loadajax;jQuery(document).ready(function(a){a(".tipsy-me").tipsy({html:true,fade:true});a(".tipsy-w").tipsy({gravity:"w",html:true,fade:true});a(".tipsy-e").tipsy({gravity:"e",html:true,fade:true});a(".tipsy-s").tipsy({gravity:"s",html:true,fade:false,offset:5});a(".wp-submenu > li > a > .cml-separator").parents("li").addClass("cml-separator-li");a(".hndle .cml-help").click(function(){a(this).toggleClass("active");a(this).parents(".postbox ").find(".inside .cml-description").toggleClass("active")});a("body").on("submit","form.cml-ajax-form",function(){$form=a(this);a('input[type="submit"]').animate({opacity:0},"slow",function(){a(this).attr("disabled","disabled")});$form.find(".cml-submit-button > .wpspinner > .spinner").fadeIn();var b=$form.serialize();var e=true;var d="application/x-www-form-urlencoded; charset=UTF-8";if($form.data("use-formdata")!==undefined){var c=new FormData();c.append("action",$form.find('input[name="action"]').val());c.append("security",$form.find("#ceceppaml-nonce").val());c.append("file",$form.find('input[type="file"]')[0].files[0]);c.append("data",$form.serialize());b=c;e=false;d=false}a.ajax({type:"POST",url:ajaxurl,data:b,processData:e,contentType:d,success:function(f){$form.find(".cml-submit-button > .wpspinner > .spinner").fadeOut();$data=null;if(f=="-1"){alert("Failed!!!");return}try{$data=a.parseJSON(f)}catch(g){return}if($data===null){return}if($data.show){a('input[type="submit"]').animate({opacity:1},"slow",function(){a(this).removeAttr("disabled")})}if($data.url){window.location=$data.url}}});return false});a(".cml_category_slug").insertAfter(a('input[name="category_base"]'));a(".cml_category_slug").removeClass("cml-hidden");a("body").on("click",".cml-js-checkbox > label, .cml-js-checkbox + label",function(){a(this).parent().find("input").trigger("click")});a("body").on("click",".cml-filter-widget .cml-checkbox input",function(){$div=a(this).parents(".cml-widget-conditional").find(".cml-widget-conditional-inner");$div.toggleClass("cml-widget-conditional-hide")});a(".cml-dropdown-me > li > input").click(function(){a(this).select();a(this).parents("ul.cml-dropdown-me").find("ul").show();a(this).parents("ul.cml-dropdown-me").find("ul > li").show()}).keyup(function(){clearTimeout(_cml_searchTimeout);var b=a(this).closest(".no-traslation").find(".spinner");b.fadeIn();var c=a(this).parent().find("ul");c.children().remove();var d={action:"ceceppaml_get_posts",post_type:ceceppaml_admin.post_type,post_id:ceceppaml_admin.post_id,security:ceceppaml_admin.secret,lang_id:a(this).data("lang"),search:a(this).val()};_cml_searchTimeout=setTimeout(function(f){var e=b;var g=c;a.post(ajaxurl,f,function(h){e.fadeOut();if(h!==""){c.append(a(h))}})},1000,d)});a("*").mouseup(function(b){$input=a('.cml-dropdown-me > li > input[type="text"]').each(function(){a(this).val(a(this).attr("original"));a(this).parents(".cml-dropdown-me").find("> li > ul").hide()})});a("input").on("blur",function(b){setTimeout(function(){$input=a('.cml-dropdown-me > li > input[type="text"]').each(function(){a(this).val(a(this).attr("original"));a(this).parents(".cml-dropdown-me").find("> li > ul").hide()})},300)});a("body").on("click",".cml-dropdown-me > li ul li",function(){var e=a(this).parents("ul.cml-dropdown-me");var f=e.find('input[type="text"]').data("lang");title=a(this).hasClass("no-hide")?"":a(this).find("span.title").html();if(title===""&&_cml_use_qem){var h=confirm("Do you want to clear the content for the selected language?");if(h){a("#title_"+f).val("");var d=tinyMCE.get("ceceppaml_content_"+f);if(d){d.setContent("")}else{a("textarea#ceceppaml_content_"+f).val("")}}}else{var b=e.find('input[name="linked_post['+f+']"]').val();var g=a(this).attr("cml-trans");if(b!==g){if(a("#title_"+f).val()!==""){e.next("a").addClass("disabled");e.next("a").next(".spinner").fadeIn();cml_load_the_content(f,g)}}}e.find('input[type="text"]').val(title);e.find('input[type="text"]').attr("original",title);e.find('> li input[type="hidden"]').val(a(this).attr("cml-trans"));e.find("ul").hide()});a("select.cml-quick-lang").on("change",function(){$div=a(this).parents(".inline-edit-col");$div.find("label.cml-quick-item").addClass("cml-hidden");if(this.value>0){$div.find("label:not(.cml-quick-"+this.value+")").removeClass("cml-hidden")}});a(".cml-pointer-help").click(function(){if(cmlPointer.dismissed.pointers.length>0){wptuts_open_pointer(0,false)}a(this).removeClass("active")});a("iframe.cml-iframe").height(a(document).height()-100);if(a('#ceceppaml-tags-meta-box input[name="search"]').length>0){a('#ceceppaml-tags-meta-box input[name="search"]').autocomplete({source:a.parseJSON(ceceppaml_admin.tags),minLength:0,select:function(b,c){$clone=a("#ceceppaml-tags-meta-box .cml-tagslist li.cml-first").clone();$clone.removeClass("cml-hidden cml-first");$clone.find(".title").html(c.item.label.toLowerCase());$clone.find("input.field").val(c.item.id);$clone.find("input.cml-input").val(c.item.label);a("#ceceppaml-tags-meta-box .cml-tagslist").append($clone);$clone.focus();$clone.find(".tipsy-s").tipsy({gravity:"s",html:true,fade:false,offset:5});setTimeout(function(){a('#ceceppaml-tags-meta-box input[name="search"]').val("");a('#ceceppaml-tags-meta-box input[name="search"]').trigger("focus")},100)}}).on("focus",function(b){a(this).autocomplete("search","")})}a("body").on("click","#ceceppaml-tags-meta-box .ntdelbutton",function(){a(this).parents("li").remove()});a("body").on("click","#ceceppaml-tags-meta-box ul li span.title",function(){$li=a(this).parents("li");$li.find(".title").hide();$li.find(".cml-input").removeClass("cml-hidden");$li.find(".cml-input").select();$li.find(".button-confirm").show();$li.find(".button-add").hide()});a("body").on("click","#ceceppaml-tags-meta-box .button-confirm",function(){$li=a(this).parents("li");$li.find(".title").html($li.find(".cml-input").val());$li.find(".title").show();$li.find(".cml-input").addClass("cml-hidden");$li.find(".button-confirm").hide();$li.find(".button-add").show()});a(".cml-titlewrap").insertAfter(a("#titlediv > #titlewrap"));a(".cml-titlewrap").removeClass("cml-hidden");a(".cml-title").each(function(){if(a(this).val()!==""){a(this).prev().fadeOut(0)}});a(".cml-title").focus(function(){a(this).prev().fadeOut("fast")});a(".cml-titlewrap input").focusout(function(){$this=a(this);if($this.val()!==""){return}$this.prev().fadeIn("fast")});a('form#post table.compat-attachment-fields tr[class*="compat-field-cml-media-title"]').remove();a(".cml-override-flags.cml-override input").click(function(){a(".cml-show-always").attr("class","cml-show-always").addClass(a(this).val())})});jQuery(document).ready(function(a){if(a(".ceceppaml-titlewrap").length>0){_cml_use_qem=true}a("input#cml-qem").change(function(){a(this).closest(".meta-box-sortables").find("#minor-publishing > .inside").toggleClass("disabled")});a(".ceceppaml-titlewrap").insertAfter(a("#titlediv > #titlewrap"));a(".ceceppaml-titlewrap").removeClass("cml-hidden");$to=a("#postdivrich #wp-content-editor-tools .wp-editor-tabs");a(".ceceppaml-editor-wrapper").insertAfter(a("#postdivrich"));if(a("#wpseo_meta")){a(".ceceppaml-yoast-kw").insertAfter(a("#yoast_wpseo_focuskw")).removeClass("cml-hidden");a(".ceceppaml-yoast-title").insertAfter(a("#yoast_wpseo_title")).removeClass("cml-hidden");a(".ceceppaml-yoast-metadesc").insertAfter(a("#yoast_wpseo_metadesc")).removeClass("cml-hidden")}});function cml_move_widget_titles(){jQuery(".widget-content").each(function(){jQuery(this).find("p:first-child").after(jQuery(this).find(".cml-widget-titles"))})}function cml_load_the_content(c,a){if(_cml_qed_loadajax){_cml_qed_loadajax.abort()}var b={action:"ceceppaml_get_post_content",post_type:ceceppaml_admin.post_type,post_id:a,security:ceceppaml_admin.secret,lang_id:c,};console.log(b);_cml_qed_loadajax=jQuery.post(ajaxurl,b,function(d){console.log(d);jQuery("#ceceppaml-meta-box .spinner").fadeOut();jQuery("#ceceppaml-meta-box ul + a.button.disabled").removeClass("disabled");if(d!==""){try{json=jQuery.parseJSON(d)}catch(f){alert("Something goes wrong :(.\nPost loading failed");console.log(f)}console.log(json);jQuery("#title_"+json.lang).val(json.title);tinyMCE.get("ceceppaml_content_"+json.lang).setContent(json.content)}else{alert("Something goes wrong :(.\nPost loading failed")}})}var CML_EEM={switchTo:function(b,c,a){jQuery(".ceceppaml-"+c+"nav-tab > a").removeClass("nav-tab-active");jQuery(".ceceppaml-"+c+"nav-tab > a#ceceppaml-"+c+"editor-"+b).addClass("nav-tab-active");jQuery(".ceceppaml-"+c+"editor-wrapper").addClass("cml-hidden");jQuery(".ceceppaml-"+c+"editor-"+b).removeClass("cml-hidden");if(a){jQuery("#ceceppaml-"+c+"editor").addClass("cml-hidden");if(c===""){jQuery("#postdivrich").removeClass("cml-hidden")}else{jQuery("#wp-excerpt-wrap").removeClass("cml-hidden")}}else{if(c===""){jQuery("#postdivrich").addClass("cml-hidden")}else{jQuery("#wp-excerpt-wrap").addClass("cml-hidden")}jQuery("#ceceppaml-"+c+"editor.ceceppaml-editor-"+b).removeClass("cml-hidden")}jQuery("#ceceppaml-editor iframe").height("433")}};